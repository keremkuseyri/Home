import streamlit as st
import pandas as pd
import plotly.graph_objects as go
import streamlit_authenticator as stauth
import yaml
from yaml.loader import SafeLoader

with open('config.yaml') as file:
    config = yaml.load(file, Loader=SafeLoader)

st.set_page_config(layout='wide')
st.image('https://www.geneltransport.com.tr/wp-content/uploads/2021/03/logo-color.png')

authenticator = stauth.Authenticate(
    config['credentials'],
    config['cookie']['name'],
    config['cookie']['key'],
    config['cookie']['expiry_days'],
    config['pre-authorized']
)

authenticator.login()
if st.session_state["authentication_status"]:

    

    with st.sidebar.expander("Sea Trend Report üìä"):
        st.page_link("Home.py", label="Total", icon="üßæ" )
        st.page_link("pages/Istanbul.py", label="Istanbul", icon="üèôÔ∏è")
        st.page_link("pages/Mersin.py", label="Mersin",  icon="üèôÔ∏è")
        st.page_link("pages/Izmir.py", label="Izmir",  icon="üèôÔ∏è")    

    st.sidebar.write(f'Welcome *{st.session_state["name"]}*')
    authenticator.logout("Logout", "sidebar")


    option = st.selectbox(
    "YearüìÖ",
    ("2024", "2023", "2022"),
    index=0,
    placeholder="Select Period",
    )
    
    



    tab1, tab2 = st.tabs(["Quantityüî¢", "Teuüì¶"])
    data2022={
        ("2022-01-01", "2022-01-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 35, "E": 306, "T": 0},
                    "B": {"I": 57, "E": 141, "T": 2},
                    "FRW": {"I": 2, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 5, "E": 73, "T": 0},
                    "B": {"I": 1, "E": 1, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 17, "E": 78, "T": 0},
                    "B": {"I": 5, "E": 37, "T": 0},
                    "FRW": {"I": 2, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 87.0, "E": 506.46789499418594, "T": 0},
                    "B": {"I": 122.32325883124963, "E": 299.82562441621656, "T": 2.0},
                    "FRW": {"I": 3.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 17.0, "E": 216.0, "T": 0},
                    "B": {"I": 2.0, "E": 2.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 6.0, "E": 255.0, "T": 0},
                    "B": {"I": 12.0, "E": 81.0, "T": 0},
                    "FRW": {"I": 3.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-02-01", "2022-02-28"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 30, "E": 271, "T": 0},
                    "B": {"I": 34, "E": 125, "T": 5},
                    "FRW": {"I": 0, "E": 2, "T": 0},
                },
                "mersin": {
                    "A": {"I": 2, "E": 116, "T": 0},
                    "B": {"I": 1, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 12, "E": 119, "T": 0},
                    "B": {"I": 5, "E": 23, "T": 0},
                    "FRW": {"I": 5, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 50.0, "E": 467.5459154755772, "T": 0},
                    "B": {"I": 73.11483840556052, "E": 273.9039121837768, "T": 6.0},
                    "FRW": {"I": 0, "E": 3.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 3.0, "E": 380.0, "T": 0},
                    "B": {"I": 6.0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 4.0, "E": 186.0, "T": 0},
                    "B": {"I": 10.0, "E": 36.0, "T": 0},
                    "FRW": {"I": 5.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-03-01", "2022-03-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 35, "E": 338, "T": 0},
                    "B": {"I": 63, "E": 160, "T": 6},
                    "FRW": {"I": 1, "E": 1, "T": 0},
                },
                "mersin": {
                    "A": {"I": 9, "E": 114, "T": 0},
                    "B": {"I": 3, "E": 2, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 23, "E": 115, "T": 0},
                    "B": {"I": 4, "E": 32, "T": 0},
                    "FRW": {"I": 3, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 75.0, "E": 461.8713459553585, "T": 0},
                    "B": {"I": 134.58007457112012, "E": 337.17194577425556, "T": 9.0},
                    "FRW": {"I": 1.0, "E": 2.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 19.0, "E": 312.0, "T": 0},
                    "B": {"I": 3.0, "E": 4.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 6.0, "E": 299.0, "T": 0},
                    "B": {"I": 6.0, "E": 63.0, "T": 0},
                    "FRW": {"I": 3.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-04-01", "2022-04-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 55, "E": 314, "T": 0},
                    "B": {"I": 57, "E": 135, "T": 6},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 6, "E": 74, "T": 0},
                    "B": {"I": 0, "E": 3, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 19, "E": 112, "T": 0},
                    "B": {"I": 4, "E": 26, "T": 0},
                    "FRW": {"I": 5, "E": 1, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 149.70967433864962, "E": 471.0366681614699, "T": 0},
                    "B": {"I": 111.32871212849417, "E": 286.02703003699975, "T": 10.0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 30.0, "E": 277.0, "T": 0},
                    "B": {"I": 0, "E": 5.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 8.0, "E": 215.0, "T": 0},
                    "B": {"I": 5.0, "E": 55.0, "T": 0},
                    "FRW": {"I": 7.0, "E": 2.0, "T": 0},
                },
            },
        },
        ("2022-05-01", "2022-05-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 44, "E": 306, "T": 0},
                    "B": {"I": 47, "E": 108, "T": 5},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 11, "E": 63, "T": 0},
                    "B": {"I": 0, "E": 1, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 14, "E": 89, "T": 0},
                    "B": {"I": 14, "E": 21, "T": 0},
                    "FRW": {"I": 6, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 119.23399301513388, "E": 541.4254613128223, "T": 0},
                    "B": {"I": 107.78661540309984, "E": 223.005689027221, "T": 7.0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 37.0, "E": 168.0, "T": 0},
                    "B": {"I": 0, "E": 2.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 12.0, "E": 184.0, "T": 0},
                    "B": {"I": 10.0, "E": 39.0, "T": 0},
                    "FRW": {"I": 4.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-06-01", "2022-06-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 45, "E": 274, "T": 0},
                    "B": {"I": 46, "E": 135, "T": 14},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 19, "E": 68, "T": 0},
                    "B": {"I": 0, "E": 2, "T": 0},
                    "FRW": {"I": 2, "E": 1, "T": 0},
                },
                "izmir": {
                    "A": {"I": 17, "E": 124, "T": 0},
                    "B": {"I": 14, "E": 23, "T": 0},
                    "FRW": {"I": 6, "E": 1, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 124.70747113918536, "E": 547.0780727080096, "T": 0},
                    "B": {"I": 96.27793751494814, "E": 287.62447236872464, "T": 20.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 37.0, "E": 215.0, "T": 0},
                    "B": {"I": 0, "E": 4.0, "T": 0},
                    "FRW": {"I": 4.0, "E": 2.0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 42.0, "E": 262.0, "T": 0},
                    "B": {"I": 18.0, "E": 35.0, "T": 0},
                    "FRW": {"I": 2.0, "E": 2.0, "T": 0},
                },
            },
        },
        ("2022-07-01", "2022-07-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 43, "E": 221, "T": 0},
                    "B": {"I": 29, "E": 92, "T": 3},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 21, "E": 48, "T": 1},
                    "B": {"I": 1, "E": 1, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 11, "E": 88, "T": 0},
                    "B": {"I": 12, "E": 29, "T": 0},
                    "FRW": {"I": 2, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 111.29252886081463, "E": 384.02872986883773, "T": 0},
                    "B": {"I": 52.02458344714559, "E": 206.33483863190204, "T": 4.0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 38.0, "E": 229.0, "T": 1.0},
                    "B": {"I": 0, "E": 4.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 8.0, "E": 157.0, "T": 0},
                    "B": {"I": 15.0, "E": 49.0, "T": 0},
                    "FRW": {"I": 4.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-08-01", "2022-08-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 54, "E": 245, "T": 0},
                    "B": {"I": 40, "E": 131, "T": 3},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 14, "E": 95, "T": 0},
                    "B": {"I": 1, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 15, "E": 120, "T": 0},
                    "B": {"I": 12, "E": 34, "T": 0},
                    "FRW": {"I": 2, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 83.87247716766265, "E": 406.6916061691059, "T": 0},
                    "B": {"I": 91.0, "E": 250.09875283366503, "T": 2.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 38.0, "E": 238.0, "T": 0},
                    "B": {"I": 2.0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 9.0, "E": 292.0, "T": 0},
                    "B": {"I": 18.0, "E": 47.0, "T": 0},
                    "FRW": {"I": 4.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-09-01", "2022-09-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 31, "E": 290, "T": 0},
                    "B": {"I": 53, "E": 135, "T": 2},
                    "FRW": {"I": 0, "E": 2, "T": 0},
                },
                "mersin": {
                    "A": {"I": 3, "E": 79, "T": 0},
                    "B": {"I": 0, "E": 1, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 14, "E": 90, "T": 0},
                    "B": {"I": 18, "E": 26, "T": 0},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 66.0, "E": 453.209238546758, "T": 0},
                    "B": {"I": 146.83704149128081, "E": 285.98783779325277, "T": 8.0},
                    "FRW": {"I": 0, "E": 4.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 10.0, "E": 243.0, "T": 0},
                    "B": {"I": 0, "E": 2.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 9.0, "E": 232.0, "T": 0},
                    "B": {"I": 11.0, "E": 49.0, "T": 0},
                    "FRW": {"I": 1.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-10-01", "2022-10-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 27, "E": 278, "T": 0},
                    "B": {"I": 43, "E": 174, "T": 6},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 5, "E": 68, "T": 0},
                    "B": {"I": 0, "E": 4, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 11, "E": 106, "T": 0},
                    "B": {"I": 5, "E": 39, "T": 0},
                    "FRW": {"I": 2, "E": 2, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 70.0, "E": 548.4467738620813, "T": 0},
                    "B": {"I": 91.16295850871919, "E": 446.62587808572795, "T": 14.0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 10.0, "E": 265.0, "T": 0},
                    "B": {"I": 0, "E": 6.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 0.0, "E": 265.0, "T": 0},
                    "B": {"I": 3.0, "E": 57.0, "T": 0},
                    "FRW": {"I": 2.0, "E": 12.0, "T": 0},
                },
            },
        },
        ("2022-11-01", "2022-11-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 33, "E": 282, "T": 0},
                    "B": {"I": 50, "E": 101, "T": 7},
                    "FRW": {"I": 1, "E": 1, "T": 0},
                },
                "mersin": {
                    "A": {"I": 10, "E": 88, "T": 0},
                    "B": {"I": 0, "E": 1, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 17, "E": 73, "T": 0},
                    "B": {"I": 12, "E": 27, "T": 0},
                    "FRW": {"I": 5, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 76.0, "E": 573.6477095006807, "T": 0},
                    "B": {"I": 100.0, "E": 220.0017891384282, "T": 8.0},
                    "FRW": {"I": 2.0, "E": 2.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 25.0, "E": 304.9999999999999, "T": 0},
                    "B": {"I": 0, "E": 2.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 2.0, "E": 245.0, "T": 0},
                    "B": {"I": 20.0, "E": 45.0, "T": 0},
                    "FRW": {"I": 8.0, "E": 0, "T": 0},
                },
            },
        },
        ("2022-12-01", "2022-12-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 24, "E": 250, "T": 0},
                    "B": {"I": 56, "E": 88, "T": 8},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 8, "E": 168, "T": 0},
                    "B": {"I": 1, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 1, "T": 0},
                },
                "izmir": {
                    "A": {"I": 16, "E": 70, "T": 0},
                    "B": {"I": 13, "E": 28, "T": 0},
                    "FRW": {"I": 0, "E": 1, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 44.0, "E": 494.90163465859365, "T": 0},
                    "B": {"I": 106.27032967032967, "E": 183.21220206339083, "T": 9.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 14.0, "E": 551.9999999999999, "T": 0},
                    "B": {"I": 4.0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0.0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 4.0, "E": 162.0, "T": 0},
                    "B": {"I": 5.0, "E": 45.0, "T": 0},
                    "FRW": {"I": 0, "E": 2.0, "T": 0},
                },
            },
        },
    }

    data2023={
        ("2023-01-01", "2023-01-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 32, "E": 286, "T": 1},
                    "B": {"I": 35, "E": 93, "T": 5},
                    "FRW": {"I": 1, "E": 1, "T": 0},
                },
                "mersin": {
                    "A": {"I": 11, "E": 133, "T": 0},
                    "B": {"I": 0, "E": 3, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 28, "E": 90, "T": 0},
                    "B": {"I": 22, "E": 30, "T": 1},
                    "FRW": {"I": 9, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 61.0, "E": 436.54721900060497, "T": 2.0},
                    "B": {"I": 66.72967032967033, "E": 177.1443956949033, "T": 6.0},
                    "FRW": {"I": 2.0, "E": 1.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 59.0, "E": 426.0, "T": 0},
                    "B": {"I": 0, "E": 14.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 4.0, "E": 206.0, "T": 0},
                    "B": {"I": 28.0, "E": 55.0, "T": 1.0},
                    "FRW": {"I": 11.0, "E": 0, "T": 0},
                },
            },
        },
        ("2023-02-01", "2023-02-28"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 27, "E": 242, "T": 0},
                    "B": {"I": 47, "E": 109, "T": 6},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 6, "E": 66, "T": 0},
                    "B": {"I": 0, "E": 2, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 11, "E": 94, "T": 0},
                    "B": {"I": 4, "E": 22, "T": 2},
                    "FRW": {"I": 2, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 55.0, "E": 425.92583958290317, "T": 0},
                    "B": {"I": 89.0, "E": 209.39904501006978, "T": 9.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 8.0, "E": 251.0, "T": 0},
                    "B": {"I": 0, "E": 3.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 1.0, "E": 282.0, "T": 0},
                    "B": {"I": 5.0, "E": 37.0, "T": 8.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
            },
        },
        ("2023-03-01", "2023-03-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 48, "E": 271, "T": 0},
                    "B": {"I": 68, "E": 133, "T": 10},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 8, "E": 128, "T": 0},
                    "B": {"I": 0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 15, "E": 72, "T": 0},
                    "B": {"I": 14, "E": 23, "T": 0},
                    "FRW": {"I": 3, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 79.0, "E": 598.6766710100404, "T": 0},
                    "B": {"I": 172.0, "E": 272.51848925935906, "T": 15.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 26.0, "E": 404.0, "T": 0},
                    "B": {"I": 0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 0.0, "E": 194.0, "T": 0},
                    "B": {"I": 9.0, "E": 48.0, "T": 0},
                    "FRW": {"I": 6.0, "E": 0, "T": 0},
                },
            },
        },
        ("2023-04-01", "2023-04-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 49, "E": 232, "T": 0},
                    "B": {"I": 54, "E": 119, "T": 10},
                    "FRW": {"I": 2, "E": 1, "T": 0},
                },
                "mersin": {
                    "A": {"I": 11, "E": 115, "T": 0},
                    "B": {"I": 1, "E": 2, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 11, "E": 81, "T": 0},
                    "B": {"I": 11, "E": 19, "T": 0},
                    "FRW": {"I": 3, "E": 1, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 128.0, "E": 436.55991316128944, "T": 0},
                    "B": {"I": 100.0, "E": 241.43136710065582, "T": 14.0},
                    "FRW": {"I": 4.0, "E": 1.0832520959251317, "T": 0},
                },
                "mersin": {
                    "A": {"I": 40.0, "E": 367.0, "T": 0},
                    "B": {"I": 0.0, "E": 0.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 4.0, "E": 234.0, "T": 0},
                    "B": {"I": 16.0, "E": 39.0, "T": 0},
                    "FRW": {"I": 6.0, "E": 0.5630727237278222, "T": 0},
                },
            },
        },
        ("2023-05-01", "2023-05-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 48, "E": 244, "T": 0},
                    "B": {"I": 64, "E": 126, "T": 21},
                    "FRW": {"I": 5, "E": 1, "T": 0},
                },
                "mersin": {
                    "A": {"I": 21, "E": 103, "T": 0},
                    "B": {"I": 0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 13, "E": 90, "T": 0},
                    "B": {"I": 26, "E": 21, "T": 0},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 91.0, "E": 536.3135234839198, "T": 0},
                    "B": {"I": 137.0, "E": 215.80559638691298, "T": 24.0},
                    "FRW": {"I": 9.0, "E": 1.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 55.0, "E": 263.0, "T": 0},
                    "B": {"I": 0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 0.0, "E": 262.0, "T": 0},
                    "B": {"I": 80.0, "E": 35.0, "T": 0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
            },
        },
        ("2023-06-01", "2023-06-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 40, "E": 268, "T": 0},
                    "B": {"I": 58, "E": 157, "T": 16},
                    "FRW": {"I": 0, "E": 5, "T": 0},
                },
                "mersin": {
                    "A": {"I": 7, "E": 101, "T": 0},
                    "B": {"I": 0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 17, "E": 77, "T": 0},
                    "B": {"I": 30, "E": 34, "T": 2},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 135.0, "E": 454.06714987339706, "T": 0},
                    "B": {"I": 135.2662562524048, "E": 266.35366914708396, "T": 27.0},
                    "FRW": {"I": 0, "E": 10.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 25.0, "E": 254.0, "T": 0},
                    "B": {"I": 0, "E": 0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 6.0, "E": 190.0, "T": 0},
                    "B": {"I": 109.0, "E": 58.0, "T": 7.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
            },
        },
        ("2023-07-01", "2023-07-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 45, "E": 286, "T": 0},
                    "B": {"I": 74, "E": 160, "T": 5},
                    "FRW": {"I": 0, "E": 1, "T": 0},
                },
                "mersin": {
                    "A": {"I": 15, "E": 96, "T": 0},
                    "B": {"I": 1, "E": 2, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 16, "E": 87, "T": 0},
                    "B": {"I": 27, "E": 31, "T": 0},
                    "FRW": {"I": 2, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 124.47619047619048, "E": 522.6742080128636, "T": 0},
                    "B": {"I": 145.25755327140473, "E": 274.9704535224101, "T": 9.0},
                    "FRW": {"I": 0, "E": 2.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 46.0, "E": 302.0, "T": 0},
                    "B": {"I": 2.0, "E": 4.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 9.0, "E": 193.0, "T": 0},
                    "B": {"I": 42.02439024390244, "E": 65.0, "T": 0},
                    "FRW": {"I": 2.975609756097561, "E": 0, "T": 0},
                },
            },
        },
        ("2023-08-01", "2023-08-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 60, "E": 280, "T": 0},
                    "B": {"I": 87, "E": 144, "T": 32},
                    "FRW": {"I": 5, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 14, "E": 109, "T": 0},
                    "B": {"I": 0, "E": 1, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 21, "E": 76, "T": 0},
                    "B": {"I": 22, "E": 31, "T": 1},
                    "FRW": {"I": 5, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 175.0, "E": 578.9361795700437, "T": 0},
                    "B": {"I": 204.0, "E": 275.18458315392525, "T": 46.0},
                    "FRW": {"I": 10.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 24.0, "E": 323.0, "T": 0},
                    "B": {"I": 0, "E": 2.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 15.0, "E": 216.0, "T": 0},
                    "B": {"I": 126.58696794534944, "E": 53.0, "T": 2.0},
                    "FRW": {"I": 7.413032054650552, "E": 0, "T": 0},
                },
            },
        },
        ("2023-09-01", "2023-09-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 40, "E": 305, "T": 0},
                    "B": {"I": 57, "E": 158, "T": 26},
                    "FRW": {"I": 5, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 12, "E": 99, "T": 0},
                    "B": {"I": 0, "E": 5, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 15, "E": 96, "T": 0},
                    "B": {"I": 33, "E": 23, "T": 0},
                    "FRW": {"I": 2, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 78.0, "E": 638.2622249645376, "T": 0},
                    "B": {"I": 138.0, "E": 318.2666679217035, "T": 25.0},
                    "FRW": {"I": 10.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 77.0, "E": 272.0, "T": 0},
                    "B": {"I": 0, "E": 7.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 9.0, "E": 267.0, "T": 0},
                    "B": {"I": 133.0, "E": 45.0, "T": 0},
                    "FRW": {"I": 4.0, "E": 0, "T": 0},
                },
            },
        },
        ("2023-10-01", "2023-10-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 39, "E": 302, "T": 0},
                    "B": {"I": 84, "E": 150, "T": 7},
                    "FRW": {"I": 1, "E": 1, "T": 0},
                },
                "mersin": {
                    "A": {"I": 7, "E": 112, "T": 0},
                    "B": {"I": 2, "E": 10, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 6, "E": 90, "T": 0},
                    "B": {"I": 28, "E": 28, "T": 0},
                    "FRW": {"I": 6, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 153.0, "E": 556.8582284440153, "T": 0},
                    "B": {"I": 181.0, "E": 276.1343002427505, "T": 12.0},
                    "FRW": {"I": 2.0, "E": 2.0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 12.0, "E": 316.0, "T": 0},
                    "B": {"I": 6.0, "E": 20.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 5.0, "E": 298.0, "T": 0},
                    "B": {"I": 170.0, "E": 51.0, "T": 0},
                    "FRW": {"I": 9.0, "E": 0, "T": 0},
                },
            },
        },
        ("2023-11-01", "2023-11-30"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 37, "E": 275, "T": 0},
                    "B": {"I": 73, "E": 134, "T": 7},
                    "FRW": {"I": 3, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 6, "E": 112, "T": 0},
                    "B": {"I": 3, "E": 11, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 10, "E": 91, "T": 0},
                    "B": {"I": 20, "E": 27, "T": 0},
                    "FRW": {"I": 2, "E": 1, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 114.0, "E": 474.81740538786056, "T": 0},
                    "B": {"I": 143.0, "E": 267.051454795107, "T": 13.0},
                    "FRW": {"I": 4.325105452273083, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 17.0, "E": 358.0, "T": 0},
                    "B": {"I": 6.0, "E": 29.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 7.0, "E": 211.0, "T": 0},
                    "B": {"I": 129.0, "E": 45.0, "T": 0},
                    "FRW": {"I": 3.0, "E": 1.0, "T": 0},
                },
            },
        },
        ("2023-12-01", "2023-12-31"): {
            "data_count": {
                "istanbul": {
                    "A": {"I": 44, "E": 243, "T": 0},
                    "B": {"I": 66, "E": 125, "T": 10},
                    "FRW": {"I": 1, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 7, "E": 106, "T": 0},
                    "B": {"I": 1, "E": 7, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 3, "E": 35, "T": 0},
                    "B": {"I": 18, "E": 19, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
            },
            "teu": {
                "istanbul": {
                    "A": {"I": 110.67489454772692, "E": 491.00665632897426, "T": 0},
                    "B": {"I": 151.0, "E": 219.86689638278682, "T": 16.0},
                    "FRW": {"I": 2.0, "E": 0, "T": 0},
                },
                "mersin": {
                    "A": {"I": 44.0, "E": 418.0, "T": 0},
                    "B": {"I": 2.0, "E": 15.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
                "izmir": {
                    "A": {"I": 2.0, "E": 77.0, "T": 0},
                    "B": {"I": 34.0, "E": 48.0, "T": 0},
                    "FRW": {"I": 0, "E": 0, "T": 0},
                },
            },
        },
    }

    data2024= {
        ('2024-01-01', '2024-01-31'): {
            'data_count': {
                'istanbul': {'A': {'I': 58, 'E': 308, 'T': 0}, 'B': {'I': 80, 'E': 125, 'T': 14}, 'FRW': {'I': 1, 'E': 1, 'T': 0}},
                'mersin': {'A': {'I': 6, 'E': 94, 'T': 0}, 'B': {'I': 0, 'E': 9, 'T': 0}, 'FRW': {'I': 0, 'E': 0, 'T': 0}},
                'izmir': {'A': {'I': 15, 'E': 93, 'T': 0}, 'B': {'I': 24, 'E': 17, 'T': 1}, 'FRW': {'I': 4, 'E': 0, 'T': 0}}
            },
            'teu': {
                'istanbul': {'A': {'I': 192.0, 'E': 544.0996154675138, 'T': 0}, 'B': {'I': 167.0, 'E': 256.16085080329856, 'T': 19.999999999999996}, 'FRW': {'I': 2.0, 'E': 2.0, 'T': 0}},
                'mersin': {'A': {'I': 10.0, 'E': 332.0, 'T': 0}, 'B': {'I': 0, 'E': 12.0, 'T': 0}, 'FRW': {'I': 0, 'E': 0, 'T': 0}},
                'izmir': {'A': {'I': 14.0, 'E': 200.0, 'T': 0}, 'B': {'I': 42.0, 'E': 28.0, 'T': 2.0}, 'FRW': {'I': 7.0, 'E': 0, 'T': 0}}
            }
        },
        ('2024-02-01', '2024-02-29'): {
            'data_count': {
                'istanbul': {'A': {'I': 34, 'E': 264, 'T': 0}, 'B': {'I': 52, 'E': 136, 'T': 16}, 'FRW': {'I': 1, 'E': 0, 'T': 0}},
                'mersin': {'A': {'I': 8, 'E': 102, 'T': 0}, 'B': {'I': 0, 'E': 7, 'T': 0}, 'FRW': {'I': 0, 'E': 0, 'T': 0}},
                'izmir': {'A': {'I': 12, 'E': 89, 'T': 0}, 'B': {'I': 21, 'E': 21, 'T': 0}, 'FRW': {'I': 3, 'E': 1, 'T': 0}}
            },
            'teu': {
                'istanbul': {'A': {'I': 68.0, 'E': 461.8376537753159, 'T': 0}, 'B': {'I': 95.0, 'E': 260.5190668969966, 'T': 32.0}, 'FRW': {'I': 4.0, 'E': 0, 'T': 0}},
                'mersin': {'A': {'I': 33.0, 'E': 331.0, 'T': 0}, 'B': {'I': 0, 'E': 12.0, 'T': 0}, 'FRW': {'I': 0, 'E': 0, 'T': 0}},
                'izmir': {'A': {'I': 14.0, 'E': 177.0, 'T': 0}, 'B': {'I': 37.0, 'E': 33.0, 'T': 0}, 'FRW': {'I': 5.0, 'E': 4.0, 'T': 0}}
            }
        }
    }
    if option == "2022":
        data = data2022
    if option == "2023":
        data = data2023
    if option == "2024":
        data = data2024
    
    with tab1:

        table_data = []
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'data_count':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"A:{city_values['A']['E']} B:{city_values['B']['E']} FRW:{city_values['FRW']['E']}",
                            'Import': f"A:{city_values['A']['I']} B:{city_values['B']['I']} FRW:{city_values['FRW']['I']}",
                            'Cross Trade': f"A:{city_values['A']['T']} B:{city_values['B']['T']} FRW:{city_values['FRW']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.write(city_df)

        table_data = []

        # Iterate over the data
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'data_count':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"{city_values['A']['E']}",
                            'Import': f"{city_values['A']['I']} ",
                            'Cross Trade': f"{city_values['A']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.header("A:")
        st.write(city_df)

        col1, col2, col3 = st.columns(3)

        grouped_data = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace
        fig = go.Figure()

        for city in grouped_data['City'].unique():
            city_data = grouped_data[grouped_data['City'] == city]
            fig.add_trace(go.Bar(
                x=city_data['From Date'],
                y=city_data['Export'],
                name=city
            ))

        # Update layout
        fig.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Export",
            barmode='group'
        )

        with col1:
            st.plotly_chart(fig, use_container_width=True, width=100, height=100)

        grouped_data_import = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Import data
        fig_import = go.Figure()

        for city in grouped_data_import['City'].unique():
            city_data_import = grouped_data_import[grouped_data_import['City'] == city]
            fig_import.add_trace(go.Bar(
                x=city_data_import['From Date'],
                y=city_data_import['Import'],
                name=city
            ))

        # Update layout for Import plot
        fig_import.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Import",
            barmode='group'
        )

        with col2:
            st.plotly_chart(fig_import, use_container_width=True, width=100, height=100)

        grouped_data_cross_trade = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Cross Trade data
        fig_cross_trade = go.Figure()

        for city in grouped_data_cross_trade['City'].unique():
            city_data_cross_trade = grouped_data_cross_trade[grouped_data_cross_trade['City'] == city]
            fig_cross_trade.add_trace(go.Bar(
                x=city_data_cross_trade['From Date'],
                y=city_data_cross_trade['Cross Trade'],
                name=city
            ))

        # Update layout for Cross Trade plot
        fig_cross_trade.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Cross Trade",
            barmode='group'
        )

        with col3:
            st.plotly_chart(fig_cross_trade, use_container_width=True, width=100, height=100)




        table_data = []

        # Iterate over the data
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'data_count':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"{city_values['B']['E']}",
                            'Import': f"{city_values['B']['I']} ",
                            'Cross Trade': f"{city_values['B']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.header("B:")
        st.write(city_df)

        col1, col2, col3 = st.columns(3)

        grouped_data = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace
        fig = go.Figure()

        for city in grouped_data['City'].unique():
            city_data = grouped_data[grouped_data['City'] == city]
            fig.add_trace(go.Bar(
                x=city_data['From Date'],
                y=city_data['Export'],
                name=city
            ))

        # Update layout
        fig.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Export",
            barmode='group'
        )

        with col1:
            st.plotly_chart(fig, use_container_width=True, width=100, height=100)

        grouped_data_import = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Import data
        fig_import = go.Figure()

        for city in grouped_data_import['City'].unique():
            city_data_import = grouped_data_import[grouped_data_import['City'] == city]
            fig_import.add_trace(go.Bar(
                x=city_data_import['From Date'],
                y=city_data_import['Import'],
                name=city
            ))

        # Update layout for Import plot
        fig_import.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Import",
            barmode='group'
        )

        with col2:
            st.plotly_chart(fig_import, use_container_width=True, width=100, height=100)

        grouped_data_cross_trade = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Cross Trade data
        fig_cross_trade = go.Figure()

        for city in grouped_data_cross_trade['City'].unique():
            city_data_cross_trade = grouped_data_cross_trade[grouped_data_cross_trade['City'] == city]
            fig_cross_trade.add_trace(go.Bar(
                x=city_data_cross_trade['From Date'],
                y=city_data_cross_trade['Cross Trade'],
                name=city
            ))

        # Update layout for Cross Trade plot
        fig_cross_trade.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Cross Trade",
            barmode='group'
        )

        with col3:
            st.plotly_chart(fig_cross_trade, use_container_width=True, width=100, height=100)



        table_data = []

        # Iterate over the data
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'data_count':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"{city_values['A']['E'] + city_values['B']['E'] + city_values['FRW']['E']}",
                            'Import': f"{city_values['A']['I'] + city_values['B']['I'] + city_values['FRW']['I']}",
                            'Cross Trade': f"{city_values['A']['T'] + city_values['B']['T'] + city_values['FRW']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.header("SUM:")
        st.write(city_df)

        col1, col2, col3 = st.columns(3)

        grouped_data = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace
        fig = go.Figure()

        for city in grouped_data['City'].unique():
            city_data = grouped_data[grouped_data['City'] == city]
            fig.add_trace(go.Bar(
                x=city_data['From Date'],
                y=city_data['Export'],
                name=city
            ))

        # Update layout
        fig.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Export",
            barmode='group'
        )

        with col1:
            st.plotly_chart(fig, use_container_width=True, width=100, height=100)

        grouped_data_import = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Import data
        fig_import = go.Figure()

        for city in grouped_data_import['City'].unique():
            city_data_import = grouped_data_import[grouped_data_import['City'] == city]
            fig_import.add_trace(go.Bar(
                x=city_data_import['From Date'],
                y=city_data_import['Import'],
                name=city
            ))

        # Update layout for Import plot
        fig_import.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Import",
            barmode='group'
        )

        with col2:
            st.plotly_chart(fig_import, use_container_width=True, width=100, height=100)

        grouped_data_cross_trade = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Cross Trade data
        fig_cross_trade = go.Figure()

        for city in grouped_data_cross_trade['City'].unique():
            city_data_cross_trade = grouped_data_cross_trade[grouped_data_cross_trade['City'] == city]
            fig_cross_trade.add_trace(go.Bar(
                x=city_data_cross_trade['From Date'],
                y=city_data_cross_trade['Cross Trade'],
                name=city
            ))

        # Update layout for Cross Trade plot
        fig_cross_trade.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Cross Trade",
            barmode='group'
        )

        with col3:
            st.plotly_chart(fig_cross_trade, use_container_width=True, width=100, height=100)


    with tab2:
        table_data = []
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'teu':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"A:{city_values['A']['E']} B:{city_values['B']['E']} FRW:{city_values['FRW']['E']}",
                            'Import': f"A:{city_values['A']['I']} B:{city_values['B']['I']} FRW:{city_values['FRW']['I']}",
                            'Cross Trade': f"A:{city_values['A']['T']} B:{city_values['B']['T']} FRW:{city_values['FRW']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.write(city_df)

        table_data = []
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'teu':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"{city_values['A']['E']}",
                            'Import': f"{city_values['A']['I']}",
                            'Cross Trade': f"{city_values['A']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.header("A:")
        st.write(city_df)

        col1, col2, col3 = st.columns(3)

        grouped_data = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace
        fig = go.Figure()

        for city in grouped_data['City'].unique():
            city_data = grouped_data[grouped_data['City'] == city]
            fig.add_trace(go.Bar(
                x=city_data['From Date'],
                y=city_data['Export'],
                name=city
            ))

        # Update layout
        fig.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Export",
            barmode='group'
        )

        with col1:
            st.plotly_chart(fig, use_container_width=True, width=100, height=100)

        grouped_data_import = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Import data
        fig_import = go.Figure()

        for city in grouped_data_import['City'].unique():
            city_data_import = grouped_data_import[grouped_data_import['City'] == city]
            fig_import.add_trace(go.Bar(
                x=city_data_import['From Date'],
                y=city_data_import['Import'],
                name=city
            ))

        # Update layout for Import plot
        fig_import.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Import",
            barmode='group'
        )

        with col2:
            st.plotly_chart(fig_import, use_container_width=True, width=100, height=100)

        grouped_data_cross_trade = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Cross Trade data
        fig_cross_trade = go.Figure()

        for city in grouped_data_cross_trade['City'].unique():
            city_data_cross_trade = grouped_data_cross_trade[grouped_data_cross_trade['City'] == city]
            fig_cross_trade.add_trace(go.Bar(
                x=city_data_cross_trade['From Date'],
                y=city_data_cross_trade['Cross Trade'],
                name=city
            ))

        # Update layout for Cross Trade plot
        fig_cross_trade.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Cross Trade",
            barmode='group'
        )

        with col3:
            st.plotly_chart(fig_cross_trade, use_container_width=True, width=100, height=100)

        table_data = []
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'teu':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"{city_values['B']['E']}",
                            'Import': f"{city_values['B']['I']}",
                            'Cross Trade': f"{city_values['B']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.header("B:")
        st.write(city_df)

        col1, col2, col3 = st.columns(3)

        grouped_data = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace
        fig = go.Figure()

        for city in grouped_data['City'].unique():
            city_data = grouped_data[grouped_data['City'] == city]
            fig.add_trace(go.Bar(
                x=city_data['From Date'],
                y=city_data['Export'],
                name=city
            ))

        # Update layout
        fig.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Export",
            barmode='group'
        )

        with col1:
            st.plotly_chart(fig, use_container_width=True, width=100, height=100)

        grouped_data_import = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Import data
        fig_import = go.Figure()

        for city in grouped_data_import['City'].unique():
            city_data_import = grouped_data_import[grouped_data_import['City'] == city]
            fig_import.add_trace(go.Bar(
                x=city_data_import['From Date'],
                y=city_data_import['Import'],
                name=city
            ))

        # Update layout for Import plot
        fig_import.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Import",
            barmode='group'
        )

        with col2:
            st.plotly_chart(fig_import, use_container_width=True, width=100, height=100)

        grouped_data_cross_trade = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Cross Trade data
        fig_cross_trade = go.Figure()

        for city in grouped_data_cross_trade['City'].unique():
            city_data_cross_trade = grouped_data_cross_trade[grouped_data_cross_trade['City'] == city]
            fig_cross_trade.add_trace(go.Bar(
                x=city_data_cross_trade['From Date'],
                y=city_data_cross_trade['Cross Trade'],
                name=city
            ))

        # Update layout for Cross Trade plot
        fig_cross_trade.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Cross Trade",
            barmode='group'
        )

        with col3:
            st.plotly_chart(fig_cross_trade, use_container_width=True, width=100, height=100)

        

        table_data = []

        # Iterate over the data
        for date_range, date_data in data.items():
            for data_type, city_data in date_data.items():
                for city, city_values in city_data.items():
                    if data_type == 'teu':
                        row = {
                            'From Date': date_range[0],
                            'To Date': date_range[1],
                            'City': city,
                            'Data Type': data_type,
                            'Export': f"{city_values['A']['E'] + city_values['B']['E'] + city_values['FRW']['E']}",
                            'Import': f"{city_values['A']['I'] + city_values['B']['I'] + city_values['FRW']['I']}",
                            'Cross Trade': f"{city_values['A']['T'] + city_values['B']['T'] + city_values['FRW']['T']}"
                        }
                        
                        table_data.append(row)


        city_df = pd.DataFrame(table_data)
        st.header("SUM:")
        st.write(city_df)


        col1, col2, col3 = st.columns(3)

        grouped_data = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace
        fig = go.Figure()

        for city in grouped_data['City'].unique():
            city_data = grouped_data[grouped_data['City'] == city]
            fig.add_trace(go.Bar(
                x=city_data['From Date'],
                y=city_data['Export'],
                name=city
            ))

        # Update layout
        fig.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Export",
            barmode='group'
        )

        with col1:
            st.plotly_chart(fig, use_container_width=True, width=100, height=100)

        grouped_data_import = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Import data
        fig_import = go.Figure()

        for city in grouped_data_import['City'].unique():
            city_data_import = grouped_data_import[grouped_data_import['City'] == city]
            fig_import.add_trace(go.Bar(
                x=city_data_import['From Date'],
                y=city_data_import['Import'],
                name=city
            ))

        # Update layout for Import plot
        fig_import.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Import",
            barmode='group'
        )

        with col2:
            st.plotly_chart(fig_import, use_container_width=True, width=100, height=100)

        grouped_data_cross_trade = city_df.groupby(['City', 'From Date']).sum().reset_index()

        # Create figure and add bar chart trace for Cross Trade data
        fig_cross_trade = go.Figure()

        for city in grouped_data_cross_trade['City'].unique():
            city_data_cross_trade = grouped_data_cross_trade[grouped_data_cross_trade['City'] == city]
            fig_cross_trade.add_trace(go.Bar(
                x=city_data_cross_trade['From Date'],
                y=city_data_cross_trade['Cross Trade'],
                name=city
            ))

        # Update layout for Cross Trade plot
        fig_cross_trade.update_layout(
            title="",
            xaxis_title="Date",
            yaxis_title="Cross Trade",
            barmode='group'
        )

        with col3:
            st.plotly_chart(fig_cross_trade, use_container_width=True, width=100, height=100)

elif st.session_state["authentication_status"] is False:
    st.error('Username/password is incorrect')

elif st.session_state["authentication_status"] is None:
    st.warning('Please enter your username and password')
    
